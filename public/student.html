<html>

<head>

</head>

<body>

















    <!-- scripts! -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <script>
        var connection = new RTCPeerConnection({
            iceServers: [{
                urls: "stun:stun.1.google.com:19302"
            }]
        })

        function loadStudent() {
            var webCam = navigator.getUserMedia({
                video: true,
                audio: true
            }, function(stream) {
                connection.addStream(stream)
            }, function(err) {
                console.log(err)
            })
            var screenShare = navigator.mediaDevices.getDisplayMedia({
                video: true,
                audio: true
            }).then(function(stream) {
                connection.addStream(stream);
            })

        }

        function loadRoom(room) {
            $.post("/ss/getroom", {
                room: room
            }, function(proctorKey) {
                console.log(proctorKey);
                connection.setRemoteDescription({
                    type: "offer",
                    sdp: proctorKey
                }).then(function() {
                    connection.createAnswer()
                }).then(function(mine) {
                    connection.setLocalDescription(mine);
                })
            })
            connection.onicecandidate = function() {
                $.post("/ss/joinroom", {
                    key: connection.localDescription.sdp,
                    room: room
                }, function(data) {

                });
            }
        }
    </script>
</body>




</html>